# Game Hub

[English](README.md) | [Русский](#game-hub)

Game Hub — это консольное приложение на языке Go, предназначенное для игры в различные текстовые мини-игры, такие как "Угадай число" и "Камень, ножницы, бумага". Проект ориентирован на модульность, поддержку нескольких языков, надежную обработку ошибок и кроссплатформенную совместимость, что позволяет легко добавлять новые игры и развертывать приложение на различных операционных системах.

## Особенности

- **Поддержка нескольких языков**: Локализация интерфейса и сообщений на английский и русский языки.
- **Модульная архитектура**: Простое добавление новых игр с использованием шаблона `game_template`.
- **Конечный автомат**: Управление состояниями игры и командами для удобного взаимодействия.
- **Надежная обработка ошибок**: Полная проверка вводимых данных и локализованные сообщения об ошибках.
- **Кроссплатформенность**: Сборка для Linux, Windows и macOS (архитектуры amd64 и arm64).
- **Установщики и портативные сборки**: Возможность установки по умолчанию или портативного использования.
- **Доступные игры**:
  - Угадай число
  - Камень, ножницы, бумага
  - Шаблон игры (для разработчиков, желающих создать новую игру)

## Требования

- **Go**: Версия 1.24 или выше
- **Опционально**: `7z` для более быстрого сжатия архивов при создании релизных сборок (используется `zip`, если `7z` недоступен)

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/Daniil-Gusev/game_hub.git
   cd game_hub
   ```

2. Проверьте установку Go:
   ```bash
   go version
   ```

3. Запустите приложение:
   ```bash
   cp -r data game_hub/
   go run .
   ```

4. (Опционально) Создайте релизную сборку:
   - Для портативных бинарных файлов:
     ```bash
     ./build_portable_release.sh vX.Y.Z
     ```
   - Для установщиков:
     ```bash
     ./build_installable_release.sh vX.Y.Z
     ```
   Замените `vX.Y.Z` на желаемую версию (например, `v1.0.0`). Результаты сборки появятся в папке `release/`.

## Использование

1. Запустите приложение, чтобы открыть главное меню, где можно выбрать игру или выйти.
2. Введите номер, соответствующий вашему выбору (например, `1` для игры "Угадай число", `0` для выхода).
3. Следуйте инструкциям в игре, которые отображаются на выбранном языке.
4. Используйте команды, такие как `помощь`, `конец`, `назад` или специфические для игры команды (например, `заново`) для навигации.

## Добавление новой игры

Чтобы создать новую игру, выполните следующие шаги:

1. Скопируйте папку `games/game_template` и переименуйте её в уникальное имя (например, `mygame`).
2. Измените файлы в новой папке:
   - **`interface.go`**: Обновите `GetId()`, чтобы он возвращал уникальный идентификатор (например, `"mygame"`).
   - **`game.go`**: Реализуйте основную логику игры.
   - **`states.go` и `states.json`**: Определите состояния игры и их локализованные описания/сообщения.
   - **`translations.json`**: Добавьте переводы для сообщений, специфичных для игры.
   - **(Опционально) `commands.go` и `commands.json`**: Определите и локализуйте пользовательские команды.
3. Зарегистрируйте игру в `games/games.go`, обновив функцию `AvailableGames()`:
   ```go
   import "game_hub/games/mygame"
   ...
   return []core.GameInterface{
       guessnumber.NewGame(),
       rockpaperscissors.NewGame(),
       mygame.NewGame(),
   }
   ```
4. Протестируйте игру, запустив приложение и убедившись, что она отображается в главном меню.

## Структура проекта

- game_hub
 - **`core/`**: Основная логика приложения, включая управление состояниями, реестр команд, локализацию и обработку ошибок.
 - **`app/`**: Главное меню и состояния на уровне приложения.
 - **`games/`**: Содержит отдельные игры.
  - **`game_template/`**: Шаблон для создания новых игр.
   - **`guessnumber/`**: Реализация игры "Угадай число".
  - **`rockpaperscissors/`**: Реализация игры "Камень, ножницы, бумага".
 - **`config/`**: Управление конфигурацией и путями.
 - **`utils/`**: Общие утилиты (например, перенос текста, подстановка параметров).
 - **`main.go`**: Точка входа в приложение.
- **`installer/`**: Скрипты и логика для создания установщиков и обёрток.
- **`build_portable_release.sh`**: Скрипт для создания портативных бинарных файлов.
- **`build_installable_release.sh`**: Скрипт для создания установщиков.

## Локализация

Игровой центр поддерживает английский и русский языки через JSON-файлы локализации, расположенные в папках `core/`, `app/` и `games/` внутри `data/`. Чтобы добавить новый язык:

1. Добавьте переводы в соответствующие JSON-файлы (например, `core/translations.json`, `games/guessnumber/translations.json`) с новым ключом языка (например, `"fr": "Bonjour"`).
2. Протестируйте новый язык, установив его в конфигурации приложения или передав как параметр.

## Создание релизных сборок

- **Портативные сборки**: Используйте `build_portable_release.sh` для создания автономных бинарных файлов с данными, архивированных в `.tar.gz` (Linux/macOS) или `.7z`/`.zip` (Windows).
- **Установщики**: Используйте `build_installable_release.sh` для создания установщиков с платформозависимыми обёртками (например, `.app` для macOS, `.desktop` для Linux и ярлыки для Windows).

Оба скрипта поддерживают несколько платформ (Linux, Windows, macOS) и архитектур (amd64, arm64). Убедитесь, что `7z` установлен для оптимального сжатия на Windows.

## Лицензия

MIT License

## Авторы

- Даниил Гусев

## Благодарности

- Создано с использованием [Go](https://golang.org/) для кроссплатформенной совместимости.
- Вдохновлено классическими консольными играми и модульной архитектурой приложений.